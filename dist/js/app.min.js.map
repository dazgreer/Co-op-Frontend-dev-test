{"version":3,"sources":["app.js"],"names":["request","XMLHttpRequest","url","raised","document","querySelector","target","progress","figures","raisedTotal","raisedTarget","progressPercentage","updateProgress","innerText","toLocaleString","minimumFractionDigits","value","open","onload","status","data","JSON","parse","responseText","classList","add","console","log","onerror","alert","send","form","getElementById","input","success","createElement","successText","getAttribute","donateText","id","addEventListener","e","preventDefault","val","Number","innerHTML","appendAfter","Element","prototype","element","parentNode","insertBefore","this","nextSibling"],"mappings":"AAEA,IAAAA,QAAA,IAAAC,eACAC,IAAA,4CACAC,OAAAC,SAAAC,cAAA,WACAC,OAAAF,SAAAC,cAAA,WACAE,SAAAH,SAAAC,cAAA,aACAG,QAAAJ,SAAAC,cAAA,YACAI,YAAA,EACAC,aAAA,EACAC,mBAAA,EAEAC,eAAA,WAGAT,OAAAU,UAAAJ,YAAAK,eAAA,MAAAC,sBAAA,IAGAJ,mBAAAF,YAAAC,aAAA,IACAH,SAAAS,MAAAL,oBAIAX,QAAAiB,KAAA,MAAAf,KAAA,GAEAF,QAAAkB,OAAA,WACA,GAAAlB,QAAAmB,QAAA,KAAAnB,QAAAmB,OAAA,IAAA,CAIA,IAAAC,EAAAC,KAAAC,MAAAtB,QAAAuB,cAKAd,YAAAW,EAAAjB,OACAO,aAAAU,EAAAd,OAEAA,OAAAO,UAAAH,aAAAI,eAAA,MAEAF,iBAIAL,SAAAiB,UAAAC,IAAA,QACAjB,QAAAgB,UAAAC,IAAA,aAIAC,QAAAC,IAAA,UAIA3B,QAAA4B,QAAA,WAEAC,MAAA,wCAIA7B,QAAA8B,OAIA,IAAAC,KAAA3B,SAAA4B,eAAA,cACAC,MAAA7B,SAAA4B,eAAA,wBAEAE,QAAA9B,SAAA+B,cAAA,KACAC,YAAAL,KAAAM,aAAA,gBACAC,WAAAP,KAAAM,aAAA,eAEAH,QAAAV,UAAAC,IAAA,WACAS,QAAAK,GAAA,UAEAR,KAAAS,mBACAT,KAAAS,iBAAA,SAAA,SAAAC,GACAA,EAAAC,iBAEA,IAAAC,EAAAC,OAAAX,MAAAjB,OAEA2B,EAAA,IAEAlC,aAAAkC,EAEAxC,OAAAU,UAAAJ,YAAAK,eAAA,MAAAC,sBAAA,IAGAH,iBAEAD,oBAAA,KACAH,QAAAgB,UAAAC,IAAA,YAEAS,QAAAW,UAAAT,aAIAF,QAAAW,UAAAP,WAIAlC,SAAA4B,eAAA,YACAE,QAAAY,YAAAtC,SAGAyB,MAAAjB,MAAA,GAEAU,QAAAC,IAAA,kBAMAoB,QAAAC,UAAAF,YAAA,SAAAG,GACAA,EAAAC,WAAAC,aAAAC,KAAAH,EAAAI","file":"app.min.js","sourcesContent":["// update values from JSON\n\nvar request = new XMLHttpRequest(),\n\turl = 'https://coop-mock-test-api.herokuapp.com/',\n\traised = document.querySelector('#raised'),\n\ttarget = document.querySelector('#target'),\n\tprogress = document.querySelector('#progress'),\n\tfigures = document.querySelector('#figures'),\n\traisedTotal = 0,\n\traisedTarget = 0,\n\tprogressPercentage = 0;\n\nvar updateProgress = function() {\n\t\n\t// update total raised\n\traised.innerText = raisedTotal.toLocaleString('en', {minimumFractionDigits: 2});\n\n\t// update progress\n    progressPercentage = (raisedTotal/raisedTarget)*100;\n\tprogress.value = progressPercentage;\n\n}\n\nrequest.open('GET', url, true);\n\nrequest.onload = function() {\n  if (request.status >= 200 && request.status < 400) {\n    // Success!\n    \n    // get data\n    var data = JSON.parse(request.responseText);\n    \n    \n    // update totals\n\n    raisedTotal = data.raised;\n    raisedTarget = data.target;\n\n    target.innerText = raisedTarget.toLocaleString('en');\n\n    updateProgress();\n\n\n    // show dynamic figures\n    progress.classList.add('show');\n    figures.classList.add('show');\n\n  } else {\n    // We reached our target server, but it returned an error\n    console.log('error')\n  }\n};\n\nrequest.onerror = function() {\n  // There was a connection error of some sort\n  alert(' There was an error... do something')\n};\n\n// make request\nrequest.send();\n\n// submit form\n\nvar form = document.getElementById('frm-donate'),\n\tinput = document.getElementById('frm-donate__donation');\n\nvar success = document.createElement('p'),\n\tsuccessText = form.getAttribute('data-success'),\n\tdonateText = form.getAttribute('data-donate');\n\nsuccess.classList.add('success');\nsuccess.id = 'success';\n\nif(form.addEventListener){\n    form.addEventListener('submit', function(e){\n\t\te.preventDefault();\n\n\t\tvar val = Number(input.value);\n\n\t\tif(val > 0) {\n\n\t\t\traisedTotal = raisedTotal + val;\n\n\t\t\traised.innerText = raisedTotal.toLocaleString('en', {minimumFractionDigits: 2});\n\n\t\t    // update progress\n\t    \tupdateProgress();\n\n\t    \tif (progressPercentage >= 100) {\t\n\t    \t\tfigures.classList.add('achieved');\n\n\t    \t\tsuccess.innerHTML = successText;\n\n\t    \t} else {\n\n\t    \t\tsuccess.innerHTML = donateText;\n\n\t    \t}\n\t    \t\n\t    \tif(!document.getElementById('success')) {\n\t    \t\tsuccess.appendAfter(figures);\n\t    \t}\n\n\t    \tinput.value = '';\n\n\t    \tconsole.log('submit form')\n\n\t    }\n\n\t});\n\n\tElement.prototype.appendAfter = function (element) {\n\t\telement.parentNode.insertBefore(this, element.nextSibling);\n\t},false;\n\n}"]}